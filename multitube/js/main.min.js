function addWatcherUrl(){for(var n=1,t=jQuery("#url"+n),i=t;t.length>0;)n++,i=t,t=jQuery("#url"+n);var u='<div class="input-group"><input type="text" class="url-input form-control" id="url'+n+'" placeholder="Enter video url"><span class="input-group-btn"><\/span><\/div>',r=jQuery('<div class="form-group"><label for="url'+n+'">Video Url:<\/label>'+u+"<\/div>"),f=jQuery('<button class="btn btn-danger" type="button"><span class="glyphicon glyphicon-minus"><\/span><\/button>').click(function(){r.closest(".form-group").remove()});r.find(".input-group-btn").append(f);i==null||i.length<=0?jQuery(".builder form").prepend(r):i.closest(".form-group").after(r)}function getWatcherUrlCount(){return jQuery(".url-input").length}function initUrl(n){var t=window.location.pathname,r=t.lastIndexOf("/"),i=t.substring(r+1);if(n==null||!n.length||n.length<=0){History.pushState({builder:!0},null,i);return}History.pushState(n,null,i+"?"+jQuery.param({videos:n}))}function initPlayer(n){jQuery(".builder").hide();jQuery(".playerPanel").show();var i=new YoutubeControl,t=new YoutubeSplitter(n,i);i.initControls(t);t.onClick=function(n){t.toggleFullscreen(n)};t.onVolumeChanged=function(n){if(!(n<0))i.onVolumeChanged(n)};t.generatePlayers();window.ActiveVidoes=n}function intBuilder(){if(jQuery(".playerPanel").hide(),jQuery(".builder").show(),window.ActiveVidoes){for(var n=getWatcherUrlCount();n<window.ActiveVidoes.length;)addWatcherUrl(),n++;jQuery.each(window.ActiveVidoes,function(n,t){jQuery("#url"+(n+1)).val(t)})}}function youtube_parser(n){var t=n.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return t&&t[7].length==11?t[7]:null}Object.size=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t};String.prototype.toHHMMSS=function(){var r=parseInt(this,10),n=Math.floor(r/3600),t=Math.floor((r-n*3600)/60),i=r-n*3600-t*60;return n<10&&(n="0"+n),t<10&&(t="0"+t),i<10&&(i="0"+i),n+":"+t+":"+i},function(){var t=Class.create(),n;t.prototype={initialize:function(n,t){this.loadedPlayer={};this.loadingPlayers={};this.firstInit=!0;this.unmutedPlayer=undefined;this.currentState=-1;this.playAllCb=[];this.playingVideos={};this.first=!0;this.ytControl=t;this.players=n;window.StateEvents=null;window.onYouTubePlayerReady=null;var i=this;window.onYouTubePlayerReady=function(n){var f,r,e,t,u,o,s;try{f=jQuery("#"+n);r=f[0];i.loadedPlayer[n]=r;e=function(t){i.onPlayerStateChange(t,n)};t=window.StateEvents;t==null&&(t={});u=n.replace(/[0-9$-]/g,"");t[u]=e;window.StateEvents=t;o="StateEvents."+u;r.addEventListener("onStateChange",o);i.onPlayerLoaded(r);s=Object.size(i.loadedPlayer);s>=i.players.length&&i.initVideos();i.loadMetadata(n)}catch(h){console.error(h.message)}}},loadMetadata:function(n){jQuery.getJSON("https://gdata.youtube.com/feeds/api/videos/"+n+"?v=2&alt=json",function(t){var i=jQuery('<a target="_blank"><\/a>'),u=t.entry.author[0].name.$t,r;i.html(u);i.attr("href","http://www.youtube.com/watch?v="+n);r=jQuery("#"+n).parent().find(".yt-title");r.append(i)})},showLoader:function(n){var t=jQuery("#"+n);t.parent().spin("large","#fff")},hideLoader:function(n){var t=jQuery("#"+n);t.parent().spin(!1)},onPlayerStateChange:function(n,t){var r,u,i;if(console.log("State: "+n+" vid: "+t),n===3&&(this.loadingPlayers[t]=!0,delete this.playingVideos[t],this.pauseAll(this.getPlayer(t)),this.showLoader(t)),n==1&&(this.loadingPlayers[t]&&(delete this.loadingPlayers[t],this.hideLoader(t)),i=this.getPlayer(t),this.playingVideos[t]=i,r=Object.size(this.playingVideos),u=this,r>=this.players.length?(this.first?(this.first=!1,this.onAllFinished()):this.playAll(),this.playAllCb.length>0&&jQuery.each(this.playAllCb,function(n,t){delete u.playAllCb[n];t.call()})):i.pauseVideo()),n==-1){i=this.getPlayer(t);this.onVideoLoaded(i)}},all:function(n){var t=this.getPlayers();jQuery.each(t,function(t,i){n(i)})},initVideos:function(){var n,t;this.firstInit&&(this.firstInit=!1,this.muteAll(),n=this.getPlayer(),n.unMute(),this.unmutedPlayer=n,t=this,this.playAll(function(){t.pauseAll()}))},syncStart:function(){this.initVideos();var n=this;setTimeout(function(){n.playAll()})},setQuality:function(n){this.all(function(t){t.setPlaybackQuality(n)})},muteAll:function(){this.all(function(n){n.mute()})},unMuteAll:function(){this.all(function(n){n.unMute()})},toggleMute:function(){var n=this.unmutedPlayer;n.isMuted()?n.unMute():n.mute();this.onVolumeChanged(this.getVolume())},setVolume:function(n){this.unmutedPlayer.setVolume(n);this.onVolumeChanged(this.getVolume())},getVolume:function(){return this.unmutedPlayer==null?-1:this.unmutedPlayer.getVolume()},togglePlay:function(){this.currentState==1?this.pauseAll():this.playAll()},playAll:function(n){if(this.firstInit){this.syncStart();return}n&&this.playAllCb.push(n);this.all(function(n){n.playVideo()});this.currentState=1;this.ytControl.play()},pauseAll:function(n){this.all(function(t){n&&t==n||t.pauseVideo()});this.currentState=2;this.ytControl.pause()},isPaused:function(){return this.currentState==2},seekTo:function(n){var t,i,r;n<=0||(t=this.isPaused(),this.pauseAll(),i=!0,this.all(function(t){var r=t.getDuration();n>=r&&(n=r-1);t.seekTo(n,i)}),this.pauseAll(),r=this,t==!1&&setTimeout(function(){r.playAll()},1e3))},getPlayers:function(){var n=[];return jQuery.each(this.loadedPlayer,function(t,i){n.push(i)}),n},getPlayer:function(n){if(n==null)for(var t in this.loadedPlayer)return this.loadedPlayer[t];return this.loadedPlayer[n]},generatePlayers:function(){var u=this.players,t=jQuery("#ytapiplayer"),r;t.empty();var f=u.length,e=1,n=1;if(f>=2){var o=Math.sqrt(f),i=Math.round(o),e=i;o>i&&e++;n=i}r=this;jQuery.each(u,function(i,u){var f=jQuery('<div class="youtube-item"><\/div>'),v=jQuery("<div><\/div>").attr("id",u),y=jQuery('<div class="youtube-item-overlay"><h2 class="yt-title"><\/h2><\/div>'),l,a;y.click(function(){var n=jQuery(this).prev()[0];return r.onClick(n)});f.append(v);f.append(y);t.append(f);var s=100/n,h=100/e,p=t.children().length,o=Math.floor(p/n),c=0,w=p%n;w>0?(o++,c=w-1):c=n-1;o=o-1;l=h*o;a=s*c;f.css("width",s+"%");f.css("height",h+"%");f.css("position","absolute");f.css("top",l+"%");f.css("left",a+"%");f.data("oldWidth",s);f.data("oldHeight",h);f.data("oldLOff",a);f.data("oldTOff",l);r.loadPlayer(v,u,"100%","100%")})},loadPlayer:function(n,t,i,r){var u=n.attr("id"),f={id:u},e="http://www.youtube.com/apiplayer?video_id="+t+"&enablejsapi=1&playerapiid="+u+"&version=3";swfobject.embedSWF(e,u,r,i,"8",null,null,{allowScriptAccess:"always",wmode:"opaque"},f)},hidePlayer:function(n){jQuery(n).parent().css({position:"absolute",left:"0px",top:"0px"})},showPlayer:function(n){var t=jQuery(n).parent(),i=t.data("oldLOff"),r=t.data("oldTOff");t.css({position:"absolute",left:i+"%",top:r+"%"})},toggleFullscreen:function(n){var t=jQuery(n).parent(),i=t.data("full");i==null&&(i=!1);i?(this.exitFullscreen(n),t.data("full",!1)):(this.fullscreen(n),t.data("full",!0))},fullscreen:function(n){var t=jQuery(n).parent(),i=this.getPlayers(),r=this;jQuery.each(i,function(t,i){i!=n&&r.hidePlayer(i)});t.show();t.css("z-index",1);t.css("top","0px");t.css("left","0px");t.css("width","100%");t.css("height","100%")},exitFullscreen:function(n){var t=jQuery(n).parent(),i=this.getPlayers(),r=this;jQuery.each(i,function(n,t){jQuery(t).parent().show();r.showPlayer(t)});t.css("z-index",0);t.css("width",t.data("oldWidth")+"%");t.css("height",t.data("oldHeight")+"%")},onVideoLoaded:function(){},onPlayerLoaded:function(){},onAllFinished:function(){console.log("Everything started");var t=0,n=this,i=function(){var t=n.getPlayer(),r;t.getCurrentTime&&(r=t.getCurrentTime(),n.ytControl.setCurrentTime(r),setTimeout(i,1e3))},r=function(){var u=n.getPlayers(),t=2,i=!1;(jQuery.each(u,function(n,r){if(!r.getVideoLoadedFraction)return i=!0,!1;var u=r.getVideoLoadedFraction();u<t&&(t=u)}),i)||(n.ytControl.setLoadedFraction(t),setTimeout(r,2e3))};jQuery.each(this.getPlayers(),function(n,i){var r=i.getDuration();r>t&&(t=r)});n.ytControl.setDuration(t);i();r()},onVolumeChanged:function(){},onClick:function(){return!1}};window.YoutubeSplitter=t;n=Class.create();n.prototype={initialize:function(){this.leftVolumeMax=46;this.isFullScreen=!1;this.isSeeking=!1;this.currentTime=0;this.duration=0;this.loadedFrac=0;this.hideControlsTimeout=undefined;this.hideControlsTime=5e3},initControls:function(n){var t=this,r;jQuery(".ytp-button[tabindex=3]").unbind("click").click(function(){n.togglePlay()});var i=!1,e=jQuery(".html5-volume-slider").width(),f=function(){if(i)return i=!1,!1},u=function(n){var r=jQuery(this).parent().offset(),i=n.pageX-r.left;return i>t.leftVolumeMax&&(i=t.leftVolumeMax),i<0&&(i=0),i};jQuery(".html5-volume-slider-foreground").unbind("draggable").draggable({containment:".html5-volume-panel",axis:"x",drag:function(i){var r=u.call(this,i);t.volumeControlChanged(n,r)}});r=0;jQuery(".html5-scrubber-button").unbind("draggable").draggable({containment:".html5-progress-bar-inner",axis:"x",drag:function(n){t.isSeeking=!0;var i=jQuery(".html5-progress-bar-inner").offset(),u=n.pageX-i.left,f=jQuery(".html5-progress-bar-inner").width(),e=100/f,o=e*u,s=t.duration*(o/100);r=s},stop:function(){t.isSeeking=!1;n.seekTo(r)}});jQuery(".html5-progress-bar-inner").unbind("click").click(function(i){var r=jQuery(".html5-progress-bar-inner").offset(),u=i.pageX-r.left,f=jQuery(".html5-progress-bar-inner").width(),e=100/f,o=e*u,s=t.duration*(o/100);n.seekTo(s)});jQuery(".html5-volume-slider").unbind("click").click(function(r){i&&f();var e=u.call(this,r);return t.volumeControlChanged(n,e),!1});jQuery(".ytp-button-fullscreen-enter").unbind("click").click(function(){BigScreen.enabled&&(t.isFullScreen===!1?BigScreen.request(jQuery(".html5-player")[0],function(){t.isFullScreen=!0;jQuery(".html5-video-controls").css("position","absolute");t.hideControlsNext()},function(){t.isFullScreen=!1;jQuery(".html5-video-controls").css("position","relative");t.showControls()}):BigScreen.exit())});jQuery("#ytapiplayer").unbind("mousemove").mousemove(function(){t.showControls();t.hideControlsNext()}).mouseleave(function(){t.hideControlsNext()});jQuery(".ytp-settings-button").unbind("click").click(function(){var n=jQuery(".ytp-menu");n.is(":visible")?n.hide():n.show()});jQuery(".html5-volume-button").unbind("click").click(function(){return n.toggleMute(),!1});jQuery("#quality").unbind("change").change(function(){n.setQuality(jQuery(this).val())})},hideControlsNext:function(){var n=this;clearTimeout(n.hideControlsTimeout);n.hideControlsTimeout=setTimeout(function(){n.hideControls()},n.hideControlsTime)},hideControls:function(){this.isFullScreen&&this.isPaused()==!1&&jQuery(".html5-video-controls").fadeOut()},showControls:function(){jQuery(".html5-video-controls").fadeIn()},setDuration:function(n){this.duration=n;jQuery(".ytp-time-duration").html((n+"").toHHMMSS())},setCurrentTime:function(n){this.currentTime=n;jQuery(".ytp-time-current").html((n+"").toHHMMSS());this.updateProgressbar()},setLoadedFraction:function(n){this.loadedFrac=n;jQuery(".html5-load-progress").css("-webkit-transform","scaleX("+n+")")},getLoadedSeconds:function(){return this.duration*this.loadedFrac},updateProgressbar:function(){var t=100/this.duration,n=t*this.currentTime;jQuery(".html5-play-progress").css("-webkit-transform","scaleX("+n/100+")");this.isSeeking==!1&&jQuery(".html5-scrubber-button").css("left",n+"%")},onVolumeChanged:function(n){if(!(n<0)){n<=0?jQuery(".html5-volume-button").attr("data-value","off"):jQuery(".html5-volume-button").attr("data-value","loud");jQuery(".html5-volume-button").attr("data-volume",n);var r=this,t=this.leftVolumeMax/100,i=Math.round(t*n);jQuery(".html5-volume-slider-foreground").css("left",i)}},volumeControlChanged:function(n,t){var i=this,r=function(n){n=parseInt(n,10);n==1&&(n=0);var t=100/i.leftVolumeMax;return t*n},u=r(t);n.setVolume(u)},play:function(){jQuery(".ytp-button-play").addClass("ytp-button-pause").removeClass("ytp-button-play");this.hideControlsNext()},pause:function(){jQuery(".ytp-button-pause").addClass("ytp-button-play").removeClass("ytp-button-pause");this.showControls()},isPaused:function(){var n=jQuery(".ytp-button-pause");return n.length>0?!1:!0},togglePlay:function(){var n=jQuery(".ytp-button-pause");n.length>0?this.play():this.pause()}};window.YoutubeControl=n}();jQuery.noConflict();jQuery(function(){var n,t;for(BrowserDetect.browser.toLowerCase().indexOf("chrome")>-1?jQuery("#playerCSS").attr("href","css/yt-player.css"):jQuery("#chromeWarn").show(),History.Adapter.bind(window,"statechange",function(){var n=History.getState();n.data&&!n.data.builder&&n.data.length?n.data.length>0&&initPlayer(n.data):intBuilder()}),n=jQuery.url(decodeURIComponent(window.location.href)).param("videos"),n?(initUrl(n),initPlayer(n)):(initUrl(),intBuilder()),jQuery(".disabledForm").submit(function(){return!1}),jQuery(".submit-videos").click(function(){var n=[],t=!1;if(jQuery(".url-input").each(function(){var i=jQuery(this).val(),r;if(i.length<=0)return!0;if(i.length==11)r=i;else if(r=youtube_parser(i),r==null)return jQuery(this).parent().addClass("has-error"),t=!0,!1;n.push(r)}),t){jQuery(".builder .alert").fadeIn();return}jQuery(".builder .alert").fadeOut();jQuery(".builder .form-group").removeClass("has-error");initUrl(n)}),t=0;t<4;t++)addWatcherUrl();jQuery("#addUrlBtn").click(function(){addWatcherUrl()});jQuery(".goBuild").click(function(){initUrl()})});
//# sourceMappingURL=main.min.js.map